<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Nova · AI Marketing & Sales</title>
  <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0-beta3/css/all.min.css">
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/10.8.0/firebase-firestore-compat.js"></script>
  <style>
    * {
      margin: 0;
      padding: 0;
      box-sizing: border-box;
    }

    body {
      font-family: 'Inter', sans-serif;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      min-height: 100vh;
      color: #1e293b;
    }

    /* Animations */
    @keyframes slideIn {
      from {
        opacity: 0;
        transform: translateY(20px);
      }
      to {
        opacity: 1;
        transform: translateY(0);
      }
    }

    @keyframes fadeIn {
      from {
        opacity: 0;
      }
      to {
        opacity: 1;
      }
    }

    @keyframes scaleIn {
      from {
        transform: scale(0.95);
        opacity: 0;
      }
      to {
        transform: scale(1);
        opacity: 1;
      }
    }

    @keyframes pulse {
      0% {
        box-shadow: 0 0 0 0 rgba(102, 126, 234, 0.4);
      }
      70% {
        box-shadow: 0 0 0 10px rgba(102, 126, 234, 0);
      }
      100% {
        box-shadow: 0 0 0 0 rgba(102, 126, 234, 0);
      }
    }

    @keyframes shimmer {
      0% {
        background-position: -1000px 0;
      }
      100% {
        background-position: 1000px 0;
      }
    }

    /* Auth screens */
    .auth-container {
      min-height: 100vh;
      display: flex;
      align-items: center;
      justify-content: center;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      animation: fadeIn 0.5s ease;
    }

    .auth-card {
      width: 380px;
      padding: 32px;
      background: rgba(255, 255, 255, 0.95);
      border-radius: 24px;
      box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
      animation: scaleIn 0.5s ease;
      backdrop-filter: blur(10px);
      border: 1px solid rgba(255, 255, 255, 0.2);
      transform-origin: center;
    }

    .auth-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 30px 70px rgba(0, 0, 0, 0.4);
      transition: all 0.3s ease;
    }

    .auth-card h2 {
      margin-bottom: 24px;
      font-weight: 600;
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .auth-card input {
      width: 100%;
      padding: 12px 16px;
      margin-bottom: 16px;
      border: 2px solid #e2e8f0;
      border-radius: 12px;
      font-size: 15px;
      transition: all 0.3s ease;
    }

    .auth-card input:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      transform: translateY(-2px);
    }

    .btn {
      padding: 12px 20px;
      border: none;
      border-radius: 12px;
      font-weight: 500;
      font-size: 15px;
      cursor: pointer;
      background: white;
      border: 2px solid #e2e8f0;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .btn::after {
      content: '';
      position: absolute;
      top: 50%;
      left: 50%;
      width: 5px;
      height: 5px;
      background: rgba(255, 255, 255, 0.5);
      opacity: 0;
      border-radius: 100%;
      transform: scale(1, 1) translate(-50%);
      transform-origin: 50% 50%;
    }

    .btn:active::after {
      animation: ripple 0.6s ease-out;
    }

    @keyframes ripple {
      0% {
        transform: scale(0, 0);
        opacity: 0.5;
      }
      20% {
        transform: scale(25, 25);
        opacity: 0.3;
      }
      100% {
        opacity: 0;
        transform: scale(40, 40);
      }
    }

    .btn-primary {
      background: linear-gradient(135deg, #667eea, #764ba2);
      color: white;
      border: none;
      position: relative;
      z-index: 1;
    }

    .btn-primary::before {
      content: '';
      position: absolute;
      top: 0;
      left: 0;
      right: 0;
      bottom: 0;
      background: linear-gradient(135deg, #764ba2, #667eea);
      border-radius: 12px;
      opacity: 0;
      transition: opacity 0.3s ease;
      z-index: -1;
    }

    .btn-primary:hover::before {
      opacity: 1;
    }

    .btn-primary:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 20px rgba(102, 126, 234, 0.4);
    }

    .btn-danger {
      background: linear-gradient(135deg, #f43f5e, #e11d48);
      color: white;
      border: none;
    }

    /* Main layout */
    .main-layout {
      display: flex;
      min-height: 100vh;
      background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      animation: fadeIn 0.5s ease;
    }

    /* Sidebar */
    .sidebar {
      width: 240px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-right: 1px solid rgba(255, 255, 255, 0.2);
      padding: 24px 12px;
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      animation: slideIn 0.5s ease;
    }

    .sidebar.collapsed {
      width: 70px;
    }

    .sidebar.collapsed .nav-item span,
    .sidebar.collapsed .logo span {
      display: none;
    }

    .logo {
      padding: 0 12px 32px 12px;
      font-weight: 600;
      font-size: 18px;
      display: flex;
      align-items: center;
      gap: 10px;
      color: #667eea;
    }

    .nav-item {
      display: flex;
      align-items: center;
      gap: 12px;
      padding: 12px;
      border-radius: 10px;
      color: #64748b;
      cursor: pointer;
      margin: 4px 0;
      transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
      position: relative;
      overflow: hidden;
    }

    .nav-item::before {
      content: '';
      position: absolute;
      left: 0;
      top: 0;
      height: 100%;
      width: 3px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      transform: scaleY(0);
      transition: transform 0.3s ease;
    }

    .nav-item:hover::before {
      transform: scaleY(1);
    }

    .nav-item i {
      width: 20px;
      transition: transform 0.3s ease;
    }

    .nav-item:hover i {
      transform: scale(1.1);
      color: #667eea;
    }

    .nav-item.active {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
      color: #667eea;
      font-weight: 500;
    }

    .nav-item.active::before {
      transform: scaleY(1);
    }

    /* Topbar */
    .topbar {
      padding: 16px 24px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-bottom: 1px solid rgba(255, 255, 255, 0.2);
      display: flex;
      align-items: center;
      justify-content: space-between;
      animation: slideIn 0.5s ease;
    }

    .page-title {
      font-size: 20px;
      font-weight: 600;
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
    }

    .topbar-right {
      display: flex;
      align-items: center;
      gap: 20px;
    }

    .avatar {
      width: 40px;
      height: 40px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      border-radius: 20px;
      cursor: pointer;
      transition: all 0.3s ease;
      animation: pulse 2s infinite;
    }

    .avatar:hover {
      transform: scale(1.1);
      box-shadow: 0 0 20px rgba(102, 126, 234, 0.5);
    }

    /* Dropdown */
    .dropdown {
      position: relative;
    }

    .dropdown-menu {
      position: absolute;
      right: 0;
      top: 50px;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 12px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
      padding: 8px;
      min-width: 160px;
      display: none;
      z-index: 100;
      animation: scaleIn 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .dropdown.open .dropdown-menu {
      display: block;
    }

    .dropdown-item {
      padding: 10px 16px;
      border-radius: 8px;
      cursor: pointer;
      transition: all 0.3s ease;
    }

    .dropdown-item:hover {
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
      transform: translateX(5px);
      color: #667eea;
    }

    /* Content area */
    .main-area {
      flex: 1;
      display: flex;
      flex-direction: column;
    }

    .content-pane {
      padding: 24px;
      overflow-y: auto;
    }

    /* Screens */
    .screen {
      display: none;
      animation: slideIn 0.5s ease;
    }

    .screen.active {
      display: block;
    }

    /* Cards */
    .card {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 20px;
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
      border: 1px solid rgba(255, 255, 255, 0.2);
      transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      animation: scaleIn 0.5s ease;
    }

    .card:hover {
      transform: translateY(-5px) scale(1.02);
      box-shadow: 0 20px 40px rgba(102, 126, 234, 0.3);
    }

    .grid-4 {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: 16px;
      margin-bottom: 24px;
    }

    .stat-value {
      font-size: 28px;
      font-weight: 600;
      margin-top: 8px;
      background: linear-gradient(135deg, #667eea, #764ba2);
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      animation: slideIn 0.5s ease;
    }

    /* Table */
    table {
      width: 100%;
      border-collapse: collapse;
    }

    th {
      text-align: left;
      padding: 12px;
      background: linear-gradient(135deg, rgba(102, 126, 234, 0.1), rgba(118, 75, 162, 0.1));
      font-weight: 500;
      color: #667eea;
    }

    td {
      padding: 12px;
      border-bottom: 1px solid rgba(226, 232, 240, 0.3);
      transition: all 0.3s ease;
    }

    tr {
      transition: all 0.3s ease;
    }

    tr:hover {
      background: rgba(102, 126, 234, 0.05);
      transform: scale(1.01);
      box-shadow: 0 5px 15px rgba(0, 0, 0, 0.1);
    }

    tr:hover td:first-child {
      border-radius: 8px 0 0 8px;
    }

    tr:hover td:last-child {
      border-radius: 0 8px 8px 0;
    }

    .badge {
      padding: 4px 8px;
      border-radius: 20px;
      font-size: 12px;
      font-weight: 500;
      transition: all 0.3s ease;
    }

    .badge.hot {
      background: linear-gradient(135deg, #fee2e2, #fecaca);
      color: #b91c1c;
    }

    .badge.warm {
      background: linear-gradient(135deg, #fff3cd, #ffe69c);
      color: #856404;
    }

    .badge.cold {
      background: linear-gradient(135deg, #e0f2fe, #bae6fd);
      color: #0369a1;
    }

    /* Form elements */
    input, select, textarea {
      padding: 10px 12px;
      border: 2px solid rgba(226, 232, 240, 0.5);
      border-radius: 8px;
      font-size: 14px;
      width: 100%;
      background: rgba(255, 255, 255, 0.9);
      transition: all 0.3s ease;
    }

    input:focus, select:focus, textarea:focus {
      outline: none;
      border-color: #667eea;
      box-shadow: 0 0 0 3px rgba(102, 126, 234, 0.1);
      transform: translateY(-2px);
    }

    .btn-icon {
      padding: 6px 10px;
      background: none;
      border: none;
      cursor: pointer;
      color: #64748b;
      transition: all 0.3s ease;
      border-radius: 6px;
    }

    .btn-icon:hover {
      color: #667eea;
      transform: scale(1.1);
      background: rgba(102, 126, 234, 0.1);
    }

    .flex {
      display: flex;
      gap: 12px;
      flex-wrap: wrap;
      margin-bottom: 20px;
    }

    /* Toast */
    .toast-container {
      position: fixed;
      bottom: 24px;
      right: 24px;
      z-index: 9999;
    }

    .toast {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 8px;
      padding: 12px 24px;
      box-shadow: 0 20px 40px rgba(0, 0, 0, 0.2);
      margin-top: 8px;
      border-left: 4px solid #667eea;
      animation: slideIn 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    .toast.success {
      border-left-color: #10b981;
    }

    .toast.error {
      border-left-color: #ef4444;
    }

    /* Modal */
    .modal-overlay {
      position: fixed;
      inset: 0;
      background: rgba(0, 0, 0, 0.5);
      backdrop-filter: blur(5px);
      display: none;
      place-items: center;
      z-index: 10000;
      animation: fadeIn 0.3s ease;
    }

    .modal-overlay.open {
      display: grid;
    }

    .modal-content {
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      border-radius: 16px;
      padding: 24px;
      max-width: 400px;
      width: 90%;
      animation: scaleIn 0.3s ease;
      border: 1px solid rgba(255, 255, 255, 0.2);
    }

    /* Slide panel */
    .slide-panel {
      position: fixed;
      right: 0;
      top: 0;
      width: 380px;
      height: 100vh;
      background: rgba(255, 255, 255, 0.95);
      backdrop-filter: blur(10px);
      box-shadow: -5px 0 30px rgba(0, 0, 0, 0.2);
      transform: translateX(100%);
      transition: transform 0.4s cubic-bezier(0.4, 0, 0.2, 1);
      padding: 24px;
      z-index: 1000;
      border-left: 1px solid rgba(255, 255, 255, 0.2);
    }

    .slide-panel.open {
      transform: translateX(0);
    }

    /* Loading */
    .loading-overlay {
      position: fixed;
      inset: 0;
      background: rgba(255, 255, 255, 0.8);
      backdrop-filter: blur(5px);
      display: none;
      place-items: center;
      z-index: 99999;
      animation: fadeIn 0.3s ease;
    }

    .loading-spinner {
      width: 40px;
      height: 40px;
      border: 3px solid rgba(102, 126, 234, 0.2);
      border-top-color: #667eea;
      border-radius: 50%;
      animation: spin 0.8s linear infinite;
    }

    @keyframes spin {
      to { transform: rotate(360deg); }
    }

    /* Toggle */
    .toggle-label {
      display: flex;
      align-items: center;
      gap: 8px;
      cursor: pointer;
      padding: 8px 12px;
      border-radius: 20px;
      background: rgba(255, 255, 255, 0.1);
      transition: all 0.3s ease;
    }

    .toggle-label:hover {
      background: rgba(255, 255, 255, 0.2);
      transform: translateY(-2px);
    }

    .hidden {
      display: none;
    }

    /* Shimmer loading effect */
    .shimmer {
      background: linear-gradient(90deg, #f0f0f0 25%, #e0e0e0 50%, #f0f0f0 75%);
      background-size: 1000px 100%;
      animation: shimmer 2s infinite;
    }
  </style>
</head>
<body>
<div id="app"></div>
<script>
  (function() {
    // Firebase setup
    const firebaseConfig = {
      apiKey: "demo-api-key",
      authDomain: "demo.firebaseapp.com",
      projectId: "demo-project"
    };
    firebase.initializeApp(firebaseConfig);
    const auth = firebase.auth();
    const db = firebase.firestore();

    // State
    let currentUser = null;
    let activeScreen = 'dashboard';
    let sidebarCollapsed = false;
    
    // Mock data
    let leads = [
      { id: '1', name: 'Acme Corp', email: 'contact@acme.com', status: 'hot', score: 92, owner: 'alice@nova.com' },
      { id: '2', name: 'Stark Industries', email: 'info@stark.com', status: 'warm', score: 67, owner: 'bob@nova.com' },
      { id: '3', name: 'Wayne Enterprises', email: 'bruce@wayne.com', status: 'cold', score: 34, owner: 'charlie@nova.com' }
    ];
    
    let campaigns = [
      { id: 'c1', name: 'Summer Sale', status: 'active' },
      { id: 'c2', name: 'Product Launch', status: 'draft' }
    ];
    
    let aiHistory = [];

    // Helper functions
    function showToast(message, type = 'info') {
      const container = document.querySelector('.toast-container');
      if (!container) return;
      const toast = document.createElement('div');
      toast.className = `toast ${type}`;
      toast.textContent = message;
      container.appendChild(toast);
      setTimeout(() => {
        toast.style.animation = 'slideIn 0.3s reverse';
        setTimeout(() => toast.remove(), 300);
      }, 3000);
    }

    function setLoading(show) {
      let loader = document.getElementById('global-loader');
      if (!loader) {
        loader = document.createElement('div');
        loader.id = 'global-loader';
        loader.className = 'loading-overlay';
        loader.innerHTML = '<div class="loading-spinner"></div>';
        document.body.appendChild(loader);
      }
      loader.style.display = show ? 'grid' : 'none';
    }

    // Mock API functions
    async function generateAIPitch(lead) {
      await new Promise(r => setTimeout(r, 600));
      return `Hi ${lead.name}, I noticed your company could benefit from our AI-powered marketing platform. Would you be open to a quick demo this week?`;
    }

    async function generateAIContent(product, audience, tone, goal) {
      await new Promise(r => setTimeout(r, 700));
      return `${product} helps ${audience} achieve ${goal} with our innovative solution. ${tone === 'professional' ? 'Schedule a demo today.' : 'Let\'s chat!'}`;
    }

    async function updateLeadScore(leadId) {
      await new Promise(r => setTimeout(r, 400));
      const lead = leads.find(l => l.id === leadId);
      if (lead) {
        lead.score = Math.min(99, lead.score + Math.floor(Math.random() * 10) - 3);
        lead.status = lead.score > 80 ? 'hot' : lead.score > 50 ? 'warm' : 'cold';
      }
      return lead;
    }

    // Render functions
    function renderApp() {
      const html = `
        <div class="toast-container"></div>
        
        <!-- Auth screens -->
        <div id="auth-container" class="auth-container" style="display: ${!currentUser ? 'flex' : 'none'};">
          <div class="auth-card">
            <div id="login-screen" class="screen ${!currentUser ? 'active' : ''}">
              <h2>Welcome Back</h2>
              <input type="email" id="login-email" placeholder="Email" value="demo@nova.com">
              <input type="password" id="login-password" placeholder="Password" value="demo123">
              <button class="btn btn-primary" id="login-btn" style="width:100%">Sign In</button>
              <div style="margin-top:16px; text-align:center">
                <a href="#" id="show-signup" style="color:#667eea">Create account</a> | 
                <a href="#" id="show-reset" style="color:#667eea">Forgot password?</a>
              </div>
            </div>
            
            <div id="signup-screen" class="screen">
              <h2>Join Nova</h2>
              <input type="email" id="signup-email" placeholder="Email">
              <input type="password" id="signup-password" placeholder="Password">
              <button class="btn btn-primary" id="signup-btn" style="width:100%">Sign Up</button>
              <div style="margin-top:16px"><a href="#" id="back-to-login" style="color:#667eea">← Back to login</a></div>
            </div>
            
            <div id="reset-screen" class="screen">
              <h2>Reset Password</h2>
              <input type="email" id="reset-email" placeholder="Email">
              <button class="btn btn-primary" id="reset-btn" style="width:100%">Send Reset Link</button>
              <div style="margin-top:16px"><a href="#" id="back-to-login2" style="color:#667eea">← Back to login</a></div>
            </div>
          </div>
        </div>
        
        <!-- Main app -->
        <div id="main-layout" class="main-layout" style="display: ${currentUser ? 'flex' : 'none'};">
          <!-- Sidebar -->
          <div class="sidebar ${sidebarCollapsed ? 'collapsed' : ''}" id="sidebar">
            <div class="logo">
              <i class="fas fa-bolt"></i>
              <span>Nova</span>
            </div>
            ${['dashboard', 'leads', 'campaigns', 'tasks', 'ai-content', 'analytics', 'settings'].map(s => `
              <div class="nav-item ${activeScreen === s ? 'active' : ''}" data-screen="${s}">
                <i class="fas fa-${s === 'dashboard' ? 'chart-pie' : s === 'leads' ? 'users' : s === 'campaigns' ? 'bullhorn' : s === 'tasks' ? 'check' : s === 'ai-content' ? 'brain' : s === 'analytics' ? 'chart-line' : 'cog'}"></i>
                <span>${s.charAt(0).toUpperCase() + s.slice(1)}</span>
              </div>
            `).join('')}
            <div style="flex:1"></div>
            <div class="nav-item" id="logout-btn">
              <i class="fas fa-sign-out-alt"></i>
              <span>Logout</span>
            </div>
          </div>
          
          <!-- Main content -->
          <div class="main-area">
            <div class="topbar">
              <span class="page-title">${activeScreen.charAt(0).toUpperCase() + activeScreen.slice(1)}</span>
              <div class="topbar-right">
                <i class="fas fa-bell" style="color:#64748b; cursor:pointer; transition:all 0.3s ease;" onmouseover="this.style.color='#667eea'" onmouseout="this.style.color='#64748b'"></i>
                <div class="dropdown" id="user-dropdown">
                  <div class="avatar" id="avatar-trigger"></div>
                  <div class="dropdown-menu">
                    <div class="dropdown-item" id="profile-item"><i class="fas fa-user"></i> Profile</div>
                    <div class="dropdown-item" id="settings-item"><i class="fas fa-cog"></i> Settings</div>
                    <div class="dropdown-item" id="logout-dropdown"><i class="fas fa-sign-out-alt"></i> Logout</div>
                  </div>
                </div>
              </div>
            </div>
            
            <div class="content-pane" id="content-pane">
              ${renderDashboardScreen()}
              ${renderLeadsScreen()}
              ${renderCampaignsScreen()}
              ${renderTasksScreen()}
              ${renderAIContentScreen()}
              ${renderAnalyticsScreen()}
              ${renderSettingsScreen()}
            </div>
          </div>
        </div>
        
        <!-- Modal -->
        <div class="modal-overlay" id="modal-overlay">
          <div class="modal-content" id="modal-content"></div>
        </div>
        
        <!-- Slide panel -->
        <div class="slide-panel" id="slide-panel">
          <div id="panel-content"></div>
        </div>
      `;
      
      document.getElementById('app').innerHTML = html;
      attachEventListeners();
    }

    function renderDashboardScreen() {
      return `
        <div id="dashboard-screen" class="screen ${activeScreen === 'dashboard' ? 'active' : ''}">
          <div class="grid-4">
            <div class="card">
              <div>Total Leads</div>
              <div class="stat-value">${leads.length}</div>
            </div>
            <div class="card">
              <div>Hot Leads</div>
              <div class="stat-value">${leads.filter(l => l.status === 'hot').length}</div>
            </div>
            <div class="card">
              <div>Tasks Due</div>
              <div class="stat-value">3</div>
            </div>
            <div class="card">
              <div>Campaigns</div>
              <div class="stat-value">${campaigns.length}</div>
            </div>
          </div>
          <div class="card">
            <h3 style="margin-bottom:12px; color:#667eea">AI Insight</h3>
            <p>Hot leads increased by 20% this week. Focus on Acme Corp for best conversion.</p>
            <button class="btn btn-primary" id="refresh-insight" style="margin-top:12px">
              <i class="fas fa-sync-alt"></i> Refresh
            </button>
          </div>
        </div>
      `;
    }

    function renderLeadsScreen() {
      return `
        <div id="leads-screen" class="screen ${activeScreen === 'leads' ? 'active' : ''}">
          <div class="flex">
            <input type="text" id="search-leads" placeholder="Search leads..." style="flex:1">
            <select id="status-filter">
              <option value="">All Status</option>
              <option value="hot">Hot</option>
              <option value="warm">Warm</option>
              <option value="cold">Cold</option>
            </select>
            <button class="btn btn-primary" id="add-lead-btn"><i class="fas fa-plus"></i> Add</button>
            <button class="btn" id="import-csv-btn"><i class="fas fa-file-csv"></i> Import</button>
            <label class="toggle-label">
              <input type="checkbox" id="priority-queue"> Priority Queue
            </label>
          </div>
          
          <div class="card" style="padding:0; overflow:auto">
            <table>
              <thead>
                <tr>
                  <th>Name</th>
                  <th>Email</th>
                  <th>Status</th>
                  <th>Score</th>
                  <th>Owner</th>
                  <th>Actions</th>
                </tr>
              </thead>
              <tbody id="leads-table-body">
                ${renderLeadRows()}
              </tbody>
            </table>
          </div>
        </div>
      `;
    }

    function renderLeadRows() {
      return leads.map(lead => `
        <tr data-lead-id="${lead.id}">
          <td>${lead.name}</td>
          <td>${lead.email}</td>
          <td><span class="badge ${lead.status}">${lead.status}</span></td>
          <td>${lead.score}</td>
          <td>${lead.owner}</td>
          <td>
            <button class="btn-icon edit-lead" data-id="${lead.id}"><i class="fas fa-edit"></i></button>
            <button class="btn-icon ai-pitch" data-id="${lead.id}"><i class="fas fa-bolt"></i></button>
            <button class="btn-icon ai-score" data-id="${lead.id}"><i class="fas fa-chart-line"></i></button>
          </td>
        </tr>
      `).join('');
    }

    function renderCampaignsScreen() {
      return `
        <div id="campaigns-screen" class="screen ${activeScreen === 'campaigns' ? 'active' : ''}">
          <button class="btn btn-primary" id="new-campaign-btn" style="margin-bottom:16px">
            <i class="fas fa-plus"></i> New Campaign
          </button>
          <div class="grid-4">
            ${campaigns.map(c => `
              <div class="card">
                <h4>${c.name}</h4>
                <p>Status: ${c.status}</p>
              </div>
            `).join('')}
          </div>
        </div>
      `;
    }

    function renderTasksScreen() {
      return `
        <div id="tasks-screen" class="screen ${activeScreen === 'tasks' ? 'active' : ''}">
          <button class="btn btn-primary" id="add-task-btn"><i class="fas fa-plus"></i> Add Task</button>
          <div class="card" style="margin-top:16px">
            <div style="display:flex; justify-content:space-between; align-items:center; margin-bottom:12px">
              <span>Call with Acme Corp</span>
              <span class="badge hot">Due Today</span>
            </div>
            <div style="display:flex; justify-content:space-between; align-items:center">
              <span>Demo preparation</span>
              <span class="badge warm">Tomorrow</span>
            </div>
          </div>
        </div>
      `;
    }

    function renderAIContentScreen() {
      return `
        <div id="ai-content-screen" class="screen ${activeScreen === 'ai-content' ? 'active' : ''}">
          <div class="card">
            <h3 style="margin-bottom:16px; color:#667eea">AI Content Generator</h3>
            <div style="display:grid; gap:12px">
              <input type="text" id="ai-product" placeholder="Product name" value="Nova Platform">
              <input type="text" id="ai-audience" placeholder="Target audience" value="SaaS companies">
              <select id="ai-tone">
                <option value="professional">Professional</option>
                <option value="friendly">Friendly</option>
                <option value="persuasive">Persuasive</option>
              </select>
              <input type="text" id="ai-goal" placeholder="Goal" value="Increase conversions">
              <button class="btn btn-primary" id="generate-ai-btn">
                <i class="fas fa-magic"></i> Generate
              </button>
            </div>
            <div id="ai-progress" class="hidden" style="margin:16px 0">
              <i class="fas fa-spinner fa-pulse"></i> Generating...
            </div>
            <div class="card" id="ai-result" style="margin-top:16px; min-height:80px; background:#f8fafc">
              AI generated content will appear here
            </div>
            <div style="margin-top:16px">
              <h4 style="color:#667eea">History</h4>
              <div id="ai-history">
                ${aiHistory.map((item, i) => `
                  <div class="card" style="margin-top:8px; cursor:pointer; padding:12px" data-version="${i}">
                    ${item.substring(0,50)}...
                  </div>
                `).join('')}
              </div>
            </div>
          </div>
        </div>
      `;
    }

    function renderAnalyticsScreen() {
      return `
        <div id="analytics-screen" class="screen ${activeScreen === 'analytics' ? 'active' : ''}">
          <div class="card">
            <div style="display:flex; justify-content:space-between; margin-bottom:16px">
              <h3 style="color:#667eea">Analytics</h3>
              <button class="btn" id="export-csv-btn">
                <i class="fas fa-download"></i> Export CSV
              </button>
            </div>
            <div style="background:linear-gradient(135deg, #667eea 0%, #764ba2 100%); height:200px; border-radius:12px; display:flex; align-items:center; justify-content:center; color:white">
              Chart visualization
            </div>
          </div>
        </div>
      `;
    }

    function renderSettingsScreen() {
      return `
        <div id="settings-screen" class="screen ${activeScreen === 'settings' ? 'active' : ''}">
          <div class="card">
            <h3 style="color:#667eea; margin-bottom:16px">Team Management</h3>
            <table style="margin-top:16px">
              <tr>
                <td>alice@nova.com</td>
                <td>
                  <select style="width:120px">
                    <option>Admin</option>
                    <option>Manager</option>
                    <option>Sales</option>
                  </select>
                </td>
                <td><button class="btn-icon"><i class="fas fa-save"></i></button></td>
              </tr>
              <tr>
                <td>bob@nova.com</td>
                <td>
                  <select style="width:120px">
                    <option>Sales</option>
                    <option>Manager</option>
                    <option>Admin</option>
                  </select>
                </td>
                <td><button class="btn-icon"><i class="fas fa-save"></i></button></td>
              </tr>
            </table>
          </div>
        </div>
      `;
    }

    function attachEventListeners() {
      // Auth
      document.getElementById('login-btn')?.addEventListener('click', () => {
        setLoading(true);
        setTimeout(() => {
          currentUser = { email: 'demo@nova.com' };
          setLoading(false);
          showToast('Welcome back!', 'success');
          renderApp();
        }, 800);
      });

      document.getElementById('show-signup')?.addEventListener('click', (e) => {
        e.preventDefault();
        document.querySelectorAll('#auth-container .screen').forEach(s => s.classList.remove('active'));
        document.getElementById('signup-screen').classList.add('active');
      });

      document.getElementById('back-to-login')?.addEventListener('click', (e) => {
        e.preventDefault();
        document.querySelectorAll('#auth-container .screen').forEach(s => s.classList.remove('active'));
        document.getElementById('login-screen').classList.add('active');
      });

      document.getElementById('show-reset')?.addEventListener('click', (e) => {
        e.preventDefault();
        document.querySelectorAll('#auth-container .screen').forEach(s => s.classList.remove('active'));
        document.getElementById('reset-screen').classList.add('active');
      });

      document.getElementById('back-to-login2')?.addEventListener('click', (e) => {
        e.preventDefault();
        document.querySelectorAll('#auth-container .screen').forEach(s => s.classList.remove('active'));
        document.getElementById('login-screen').classList.add('active');
      });

      document.getElementById('signup-btn')?.addEventListener('click', () => {
        setLoading(true);
        setTimeout(() => {
          currentUser = { email: 'new@nova.com' };
          setLoading(false);
          showToast('Account created!', 'success');
          renderApp();
        }, 800);
      });

      document.getElementById('reset-btn')?.addEventListener('click', () => {
        showToast('Reset link sent!', 'success');
      });

      // Logout
      const logout = () => {
        setLoading(true);
        setTimeout(() => {
          currentUser = null;
          setLoading(false);
          showToast('See you soon!');
          renderApp();
        }, 500);
      };
      document.getElementById('logout-btn')?.addEventListener('click', logout);
      document.getElementById('logout-dropdown')?.addEventListener('click', logout);

      // Navigation
      document.querySelectorAll('.nav-item[data-screen]').forEach(el => {
        el.addEventListener('click', () => {
          activeScreen = el.dataset.screen;
          renderApp();
        });
      });

      // Dropdown
      document.getElementById('avatar-trigger')?.addEventListener('click', () => {
        document.getElementById('user-dropdown').classList.toggle('open');
      });

      // Close dropdown when clicking outside
      document.addEventListener('click', (e) => {
        if (!e.target.closest('.dropdown')) {
          document.getElementById('user-dropdown')?.classList.remove('open');
        }
      });

      // Dashboard refresh
      document.getElementById('refresh-insight')?.addEventListener('click', () => {
        showToast('Insights refreshed!');
      });

      // AI Pitch
      document.querySelectorAll('.ai-pitch').forEach(btn => {
        btn.addEventListener('click', async (e) => {
          const leadId = e.currentTarget.dataset.id;
          const lead = leads.find(l => l.id === leadId);
          if (!lead) return;
          
          setLoading(true);
          const pitch = await generateAIPitch(lead);
          setLoading(false);
          
          document.getElementById('panel-content').innerHTML = `
            <h3 style="color:#667eea; margin-bottom:16px">AI Pitch</h3>
            <div class="card" style="margin:16px 0">${pitch}</div>
            <button class="btn btn-primary" id="copy-pitch" style="width:100%">
              <i class="fas fa-copy"></i> Copy
            </button>
          `;
          document.getElementById('slide-panel').classList.add('open');
          
          document.getElementById('copy-pitch')?.addEventListener('click', () => {
            navigator.clipboard?.writeText(pitch);
            showToast('Copied to clipboard!');
          });
        });
      });

      // AI Score
      document.querySelectorAll('.ai-score').forEach(btn => {
        btn.addEventListener('click', async (e) => {
          const leadId = e.currentTarget.dataset.id;
          setLoading(true);
          await updateLeadScore(leadId);
          setLoading(false);
          renderApp();
          showToast('Lead score updated!', 'success');
        });
      });

      // AI Content Generation
      document.getElementById('generate-ai-btn')?.addEventListener('click', async () => {
        const product = document.getElementById('ai-product')?.value;
        const audience = document.getElementById('ai-audience')?.value;
        const tone = document.getElementById('ai-tone')?.value;
        const goal = document.getElementById('ai-goal')?.value;
        
        if (!product || !audience || !goal) {
          showToast('Please fill all fields', 'error');
          return;
        }
        
        const progress = document.getElementById('ai-progress');
        progress.classList.remove('hidden');
        
        try {
          const content = await generateAIContent(product, audience, tone, goal);
          document.getElementById('ai-result').innerText = content;
          aiHistory.unshift(content);
          if (aiHistory.length > 5) aiHistory.pop();
          showToast('Content generated!', 'success');
        } catch (error) {
          showToast('Generation failed', 'error');
        } finally {
          progress.classList.add('hidden');
        }
      });

      // Add lead
      document.getElementById('add-lead-btn')?.addEventListener('click', () => {
        const newLead = {
          id: Date.now().toString(),
          name: 'New Lead',
          email: 'new@company.com',
          status: 'warm',
          score: 50,
          owner: 'you@nova.com'
        };
        leads.push(newLead);
        renderApp();
        showToast('Lead added!', 'success');
      });

      // Priority queue
      document.getElementById('priority-queue')?.addEventListener('change', (e) => {
        if (e.target.checked) {
          leads.sort((a, b) => b.score - a.score);
        } else {
          leads.sort((a, b) => a.id.localeCompare(b.id));
        }
        document.getElementById('leads-table-body').innerHTML = renderLeadRows();
      });

      // Search
      document.getElementById('search-leads')?.addEventListener('input', (e) => {
        const term = e.target.value.toLowerCase();
        const filtered = leads.filter(l => 
          l.name.toLowerCase().includes(term) || 
          l.email.toLowerCase().includes(term)
        );
        document.getElementById('leads-table-body').innerHTML = filtered.map(l => `
          <tr>
            <td>${l.name}</td>
            <td>${l.email}</td>
            <td><span class="badge ${l.status}">${l.status}</span></td>
            <td>${l.score}</td>
            <td>${l.owner}</td>
            <td>
              <button class="btn-icon"><i class="fas fa-edit"></i></button>
              <button class="btn-icon ai-pitch" data-id="${l.id}"><i class="fas fa-bolt"></i></button>
              <button class="btn-icon ai-score" data-id="${l.id}"><i class="fas fa-chart-line"></i></button>
            </td>
          </tr>
        `).join('');
      });

      // Other buttons
      document.getElementById('import-csv-btn')?.addEventListener('click', () => {
        showToast('Import started!');
      });

      document.getElementById('new-campaign-btn')?.addEventListener('click', () => {
        showToast('Create campaign modal');
      });

      document.getElementById('add-task-btn')?.addEventListener('click', () => {
        showToast('Add task');
      });

      document.getElementById('export-csv-btn')?.addEventListener('click', () => {
        showToast('Exporting...');
      });

      // Profile/settings dropdown
      document.getElementById('profile-item')?.addEventListener('click', () => {
        activeScreen = 'settings';
        renderApp();
      });
      
      document.getElementById('settings-item')?.addEventListener('click', () => {
        activeScreen = 'settings';
        renderApp();
      });

      // History items
      document.querySelectorAll('[data-version]').forEach(el => {
        el.addEventListener('click', () => {
          const idx = el.dataset.version;
          document.getElementById('ai-result').innerText = aiHistory[idx];
        });
      });
    }

    // Initial render
    renderApp();
  })();
</script>
</body>
</html>
